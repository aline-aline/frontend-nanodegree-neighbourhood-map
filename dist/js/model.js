var model={self:this,locations:[{title:ko.observable("Museu Aberto de Arte Urbana de São Paulo"),lat:-23.508061,lng:-46.625269,isFiltered:ko.observable(!0)},{title:ko.observable("Museu Penitenciário Paulista"),lat:-23.506858,lng:-46.615519,isFiltered:ko.observable(!0)},{title:ko.observable("Museu do Transporte Público Gaetano Ferolla"),lat:-23.524841,lng:-46.625055,isFiltered:ko.observable(!0)},{title:ko.observable("Museu da Saúde Pública Emílio Ribas"),lat:-23.526361,lng:-46.642469,isFiltered:ko.observable(!0)},{title:ko.observable("Memorial da América Latina"),lat:-23.52677,lng:-46.664291,isFiltered:ko.observable(!0)},{title:ko.observable("Museu de Arte Sacra de São Paulo"),lat:-23.530388,lng:-46.631339,isFiltered:ko.observable(!0)},{title:ko.observable("Museu da Língua Portuguesa"),lat:-23.53049,lng:-46.639325,isFiltered:ko.observable(!0)},{title:ko.observable("Museu da Energia de São Paulo"),lat:-23.530424,lng:-46.643494,isFiltered:ko.observable(!0)},{title:ko.observable("Pinacoteca do Estado de São Paulo"),lat:-23.534267,lng:-46.63395,isFiltered:ko.observable(!0)},{title:ko.observable("Memorial da Resistência de São Paulo"),lat:-23.534852,lng:-46.638811,isFiltered:ko.observable(!0)},{title:ko.observable("Museu da Imigração do Estado de São Paulo"),lat:-23.549695,lng:-46.612694,isFiltered:ko.observable(!0)},{title:ko.observable("Catavento (museu)"),lat:-23.544017,lng:-46.627736,isFiltered:ko.observable(!0)},{title:ko.observable("Museu da Diversidade Sexual"),lat:-23.543963,lng:-46.642872,isFiltered:ko.observable(!0)},{title:ko.observable("Museu Judaico de São Paulo"),lat:-23.550814,lng:-46.645647,isFiltered:ko.observable(!0)},{title:ko.observable("Museu Anchieta"),lat:-23.547963,lng:-46.632792,isFiltered:ko.observable(!0)},{title:ko.observable("Museu da Imagem e do Som de São Paulo"),lat:-23.548404,lng:-46.632312,isFiltered:ko.observable(!0)},{title:ko.observable("Solar da Marquesa de Santos"),lat:-23.54876,lng:-46.632208,isFiltered:ko.observable(!0)},{title:ko.observable("Caixa Cultural"),lat:-23.549249,lng:-46.632876,isFiltered:ko.observable(!0)}],setContent:function(){for(var e=0;e<this.locations.length;e++)var o="https://pt.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&exintro=&explaintext=&titles="+this.locations[e].title(),a=setTimeout(function(){t="failed to get Wiki resources"},8e3),t=function(e,o,a){var t="";$.ajax({url:a,dataType:"jsonp"}).done(function(a){if(a&&a.query&&a.query.pages)var l=a.query.pages;else t="No pages were found in Wiki",model.locations[e].infowindow=new google.maps.InfoWindow({content:model.locations[e].title()+"<br><br>Wikipedia info:<br>"+t});for(var i in l)t=l[i].extract,model.locations[e].infowindow=new google.maps.InfoWindow({content:'<div class="infoWindow"<strong><b>'+model.locations[e].title()+"</b></strong><br><br>Wikipedia info:<br>"+t+"</div>",maxWidth:"150"});clearTimeout(o)}).fail(function(){alert("Unable to reach Wikipedia."),model.locations[e].infowindow=new google.maps.InfoWindow({content:model.locations[e].title()+"<br><br>Wikipedia info:<br>Unavailable"})})}(e,a,o)},addMarkers:function(){for(var e=0;e<this.locations.length;e++)this.locations[e].marker=this.createMarker(this.locations[e],e)},toggleBounce:function(e){viewModel.disableMarkers(),e.marker.setAnimation(google.maps.Animation.BOUNCE)},createMarker:function(e){var o=new google.maps.Marker({title:e.title(),map:map,draggable:!1,animation:google.maps.Animation.DROP,position:new google.maps.LatLng(e.lat,e.lng)});return o.addListener("click",function(){model.toggleBounce(e),e.infowindow.open(map,o)}),o},init:function(){this.addMarkers(),this.setContent()}};